# System Profiles

This directory stores snapshots of both the desktop (base) and laptop (remote) environments for comparison and sync analysis.

## Directory Structure

```
system-profiles/
├── base/                    # Desktop (local) environment
│   ├── apt-packages.txt     # APT installed packages
│   ├── dpkg-packages.txt    # DPKG package list
│   ├── snap-packages.txt    # Snap packages
│   ├── flatpak-packages.txt # Flatpak applications
│   ├── pip-packages.txt     # Python pip packages
│   ├── conda-envs.txt       # Conda environments
│   ├── ollama-models.txt    # Ollama models
│   ├── system-info.txt      # System information (uname)
│   ├── cpu-info.txt         # CPU details
│   ├── memory-info.txt      # Memory information
│   └── dotfiles/            # Configuration files
│       ├── .bashrc
│       ├── .zshrc
│       ├── .gitconfig
│       └── ...
└── remote/                  # Laptop (remote) environment
    └── (same structure as base)
```

## Usage

These profiles are automatically generated by the `sync-agent.sh` script. They provide the AI agent with complete environment snapshots for intelligent sync analysis.

### Gathering Profiles

```bash
# Gather both profiles (requires laptop on LAN)
./sync-agent.sh --gather-profiles

# Gather only desktop profile
./sync-agent.sh --gather-base

# Gather only laptop profile (requires SSH to laptop)
./sync-agent.sh --gather-remote
```

### Profile Contents

Each profile contains:

1. **Package Lists**: Complete inventory of installed software across multiple package managers
2. **Hardware Info**: CPU, memory specs to inform resource-aware sync decisions
3. **Environment State**: Python environments, Ollama models, etc.
4. **Configuration Files**: Key dotfiles for detecting config drift

## Sync Process

1. Profiles are gathered from both systems
2. Claude CLI agent analyzes profiles using the system prompt
3. Agent provides recommendations for:
   - Packages to install on laptop
   - Packages to remove from laptop
   - Dotfiles to sync
   - Items to skip (with hardware-based reasoning)

## Notes

- Profiles are snapshots in time; run the sync agent periodically
- Laptop must be reachable via SSH (alias: `laptop`) for remote profile gathering
- Profile files are plain text for easy inspection and debugging
